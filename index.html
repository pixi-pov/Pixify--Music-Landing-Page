<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pixify</title>
  <meta name="description" content="Modern music landing page with hero, playlist player, gallery lightbox, events, and contact form." />
  <meta name="theme-color" content="#6d28d9" />

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            display: ["ui-sans-serif", "system-ui", "-apple-system", "Segoe UI", "Roboto", "Inter", "sans-serif"],
          },
          boxShadow: {
            glow: "0 0 0 2px rgba(168,85,247,.5), 0 0 35px rgba(168,85,247,.35)",
          },
          animation: {
            'fade-in': 'fadeIn .5s ease-out both',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: 0, transform: 'translateY(6px)' },
              '100%': { opacity: 1, transform: 'translateY(0)' },
            }
          }
        }
      }
    }
  </script>
  <style>
    /* Hide default scrollbar for the lightbox image wrapper */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    html { scroll-behavior: smooth; }
  </style>
</head>
<body class="bg-[#07070a] text-white font-display">
  <!-- Background decoration -->
  <div aria-hidden="true" class="pointer-events-none fixed inset-0 -z-10">
    <div class="absolute -top-40 -right-40 h-96 w-96 rounded-full bg-purple-700/20 blur-3xl"></div>
    <div class="absolute top-1/3 -left-40 h-80 w-80 rounded-full bg-fuchsia-600/20 blur-3xl"></div>
  </div>

  <!-- NAVBAR -->
  <header id="navbar" class="fixed top-0 inset-x-0 z-50 transition-all">
    <nav class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-16 items-center justify-between">
        <a href="#home" class="flex items-center space-x-3">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-purple-500 to-fuchsia-600 shadow-glow">🎵</span>
          <span class="text-xl font-bold tracking-wide">Pixify</span>
        </a>
        <button id="mobileBtn" class="md:hidden inline-flex items-center justify-center rounded-lg p-2 ring-1 ring-white/10 hover:ring-white/30 focus:outline-none" aria-label="Open Menu" aria-expanded="false">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
        </button>
        <ul id="navLinks" class="hidden md:flex items-center space-x-8 text-sm font-medium">
          <li><a class="nav-link opacity-80 hover:opacity-100" href="#about">About</a></li>
          <li><a class="nav-link opacity-80 hover:opacity-100" href="#music">Music</a></li>
          <li><a class="nav-link opacity-80 hover:opacity-100" href="#gallery">Gallery</a></li>
          <li><a class="nav-link opacity-80 hover:opacity-100" href="#events">Events</a></li>
          <li><a class="nav-link opacity-80 hover:opacity-100" href="#contact">Contact</a></li>
          <li><a class="rounded-xl bg-gradient-to-br from-purple-600 to-fuchsia-600 px-4 py-2 shadow-glow hover:shadow-lg hover:shadow-fuchsia-700/30" href="#newsletter">Subscribe</a></li>
        </ul>
      </div>
      <!-- Mobile menu -->
      <div id="mobileMenu" class="md:hidden hidden animate-fade-in">
        <ul class="space-y-2 pb-4 text-sm">
          <li><a class="block rounded-lg px-3 py-2 hover:bg-white/5" href="#about">About</a></li>
          <li><a class="block rounded-lg px-3 py-2 hover:bg-white/5" href="#music">Music</a></li>
          <li><a class="block rounded-lg px-3 py-2 hover:bg-white/5" href="#gallery">Gallery</a></li>
          <li><a class="block rounded-lg px-3 py-2 hover:bg-white/5" href="#events">Events</a></li>
          <li><a class="block rounded-lg px-3 py-2 hover:bg-white/5" href="#contact">Contact</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <!-- HERO -->
  <section id="home" class="relative min-h-[92vh] flex items-center justify-center overflow-hidden">
    <img src="https://picsum.photos/1600/900?random=11" alt="Stage crowd" class="absolute inset-0 h-full w-full object-cover opacity-40" />
    <div class="absolute inset-0 bg-gradient-to-t from-[#07070a] via-[#07070a]/40 to-transparent"></div>
    <div class="relative z-10 mx-auto max-w-5xl px-6 py-24 text-center">
      <p class="mx-auto mb-4 inline-block rounded-full border border-white/15 px-4 py-1 text-xs tracking-widest uppercase text-white/80">New single out now</p>
      <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold leading-tight">
        Feel the <span class="bg-gradient-to-r from-purple-400 to-fuchsia-400 bg-clip-text text-transparent">Pulse</span> of Sound
      </h1>
      <p class="mt-4 text-white/80 max-w-2xl mx-auto">Electronic textures, organic grooves. Discover our latest tracks, tour dates, and a gallery from behind the scenes.</p>
      <div class="mt-8 flex flex-wrap items-center justify-center gap-4">
        <a href="#music" class="rounded-2xl bg-gradient-to-br from-purple-600 to-fuchsia-600 px-6 py-3 font-semibold shadow-glow hover:scale-[1.02] transition">Listen now</a>
        <a href="#gallery" class="rounded-2xl border border-white/15 px-6 py-3 font-semibold hover:bg-white/5">View gallery</a>
      </div>
      <div class="mt-12 grid grid-cols-3 gap-6 text-left">
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4 backdrop-blur">
          <p class="text-3xl font-bold" data-counter="1.2">0</p>
          <p class="text-sm text-white/70">Million Streams</p>
        </div>
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4 backdrop-blur">
          <p class="text-3xl font-bold" data-counter="250">0</p>
          <p class="text-sm text-white/70">Live Shows</p>
        </div>
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4 backdrop-blur">
          <p class="text-3xl font-bold" data-counter="75">0</p>
          <p class="text-sm text-white/70">Countries Reached</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="relative py-20">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div class="grid items-center gap-10 md:grid-cols-2">
        <div>
          <h2 class="text-3xl font-bold">About the Project</h2>
          <p class="mt-4 text-white/80">We blend analog synths with field recordings to craft cinematic soundscapes. Our shows are immersive—lights, visuals, and a community that moves as one. Dive into our world: tracks, tours, and behind‑the‑scenes moments.</p>
          <ul class="mt-6 space-y-3 text-white/80">
            <li class="flex items-start gap-3"><span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-purple-600/20">✓</span>Independent & community-driven</li>
            <li class="flex items-start gap-3"><span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-purple-600/20">✓</span>Live visuals & reactive lighting</li>
            <li class="flex items-start gap-3"><span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-purple-600/20">✓</span>Workshops & collabs with local artists</li>
          </ul>
        </div>
        <div class="relative">
          <img class="rounded-2xl shadow-xl" src="https://picsum.photos/800/600?random=22" alt="Studio shot" />
          <img class="absolute -bottom-8 -left-8 w-40 rounded-xl border border-white/10 shadow-lg" src="https://picsum.photos/300/200?random=23" alt="Live shot" />
          <img class="absolute -top-8 -right-10 w-48 rounded-xl border border-white/10 shadow-lg" src="https://picsum.photos/300/240?random=24" alt="Crowd" />
        </div>
      </div>
    </div>
  </section>

  <!-- MUSIC / PLAYER -->
  <section id="music" class="relative py-20">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div class="mb-10 flex items-end justify-between gap-6">
        <div>
          <h2 class="text-3xl font-bold">Latest Tracks</h2>
          <p class="mt-2 text-white/70">A mini playlist with custom controls. Click a track to play.</p>
        </div>
        <div class="hidden sm:flex items-center gap-3 text-sm text-white/70">
          <span class="inline-flex h-2 w-2 rounded-full bg-green-400"></span> Online
        </div>
      </div>

      <div class="grid gap-8 lg:grid-cols-2">
        <!-- Player Card -->
        <div class="rounded-2xl border border-white/10 bg-gradient-to-br from-white/5 to-white/[0.02] p-6 shadow-xl backdrop-blur">
          <div class="flex items-center gap-5">
            <img id="cover" src="https://picsum.photos/400/400?random=31" alt="Cover" class="h-28 w-28 rounded-xl object-cover" />
            <div class="min-w-0">
              <h3 id="trackTitle" class="truncate text-xl font-semibold">—</h3>
              <p id="trackArtist" class="truncate text-white/70">MyMusic</p>
              <div class="mt-3 flex items-center gap-3">
                <button id="prevBtn" class="rounded-full p-2 hover:bg-white/10" aria-label="Previous">
                  <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7 7-7M21 19l-7-7 7-7"/></svg>
                </button>
                <button id="playPauseBtn" class="rounded-full bg-gradient-to-br from-purple-600 to-fuchsia-600 p-4 shadow-glow" aria-label="Play">
                  <svg id="playIcon" class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                  <svg id="pauseIcon" class="hidden h-6 w-6" viewBox="0 0 24 24" fill="currentColor"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>
                </button>
                <button id="nextBtn" class="rounded-full p-2 hover:bg-white/10" aria-label="Next">
                  <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M3 5l7 7-7 7"/></svg>
                </button>
              </div>
            </div>
          </div>

          <div class="mt-6">
            <!-- Progress -->
            <div id="progressWrap" class="relative h-2 w-full cursor-pointer rounded-full bg-white/10">
              <div id="progressBar" class="absolute left-0 top-0 h-2 w-0 rounded-full bg-gradient-to-r from-purple-500 to-fuchsia-500"></div>
            </div>
            <div class="mt-2 flex items-center justify-between text-xs text-white/60">
              <span id="currentTime">0:00</span>
              <span id="duration">0:00</span>
            </div>
            <div class="mt-4 flex items-center gap-3">
              <label for="volume" class="text-xs text-white/60">Vol</label>
              <input id="volume" type="range" min="0" max="1" step="0.01" value="0.8" class="w-full accent-purple-500" />
            </div>
          </div>
          <audio id="audio" preload="metadata"></audio>
        </div>

        <!-- Playlist -->
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4 lg:p-6">
          <ul id="playlist" class="divide-y divide-white/10">
            <!-- JS injects tracks here -->
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- GALLERY with Lightbox -->
  <section id="gallery" class="relative py-20">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div class="mb-10 flex items-end justify-between">
        <div>
          <h2 class="text-3xl font-bold">Photo Gallery</h2>
          <p class="mt-2 text-white/70">Click any photo to open the lightbox. Use ← → or Esc.</p>
        </div>
        <button id="shuffleBtn" class="rounded-xl border border-white/15 px-4 py-2 text-sm hover:bg-white/5">Shuffle</button>
      </div>

      <div id="galleryGrid" class="grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6">
        <!-- JS populates images -->
      </div>
    </div>

    <!-- Lightbox modal -->
    <div id="lightbox" class="fixed inset-0 z-[60] hidden place-items-center bg-black/90 p-6">
      <button id="closeLightbox" aria-label="Close" class="absolute right-5 top-5 rounded-lg p-2 hover:bg-white/10">
        <svg class="h-7 w-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
      </button>
      <button id="prevImg" aria-label="Previous image" class="absolute left-4 top-1/2 -translate-y-1/2 rounded-full p-3 hover:bg-white/10">
        <svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
      </button>
      <button id="nextImg" aria-label="Next image" class="absolute right-4 top-1/2 -translate-y-1/2 rounded-full p-3 hover:bg-white/10">
        <svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
      </button>
      <div class="max-h-[85vh] max-w-6xl select-none">
        <img id="lightboxImg" src="" alt="Expanded view" class="mx-auto block max-h-[85vh] w-auto rounded-2xl shadow-2xl no-scrollbar" />
        <p id="lightboxCap" class="mt-3 text-center text-sm text-white/70"></p>
      </div>
    </div>
  </section>

  <!-- EVENTS -->
  <section id="events" class="relative py-20">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div class="mb-8 flex flex-wrap items-center justify-between gap-4">
        <h2 class="text-3xl font-bold">Upcoming Events</h2>
        <div class="inline-flex rounded-xl border border-white/15 p-1 text-sm">
          <button data-filter="all" class="filter-btn rounded-lg px-3 py-1.5 hover:bg-white/10">All</button>
          <button data-filter="tour" class="filter-btn rounded-lg px-3 py-1.5 hover:bg-white/10">Tours</button>
          <button data-filter="festival" class="filter-btn rounded-lg px-3 py-1.5 hover:bg-white/10">Festivals</button>
          <button data-filter="workshop" class="filter-btn rounded-lg px-3 py-1.5 hover:bg-white/10">Workshops</button>
        </div>
      </div>

      <div id="eventList" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        <!-- JS populates events -->
      </div>
    </div>
  </section>

  <!-- NEWSLETTER -->
  <section id="newsletter" class="relative py-20">
    <div class="mx-auto max-w-3xl px-6 text-center">
      <h2 class="text-3xl font-bold">Join the newsletter</h2>
      <p class="mt-2 text-white/70">Be the first to hear new music, shows, and special drops.</p>
      <form id="newsForm" class="mx-auto mt-6 flex max-w-xl flex-col items-center gap-3 sm:flex-row">
        <input type="email" required placeholder="you@example.com" class="w-full flex-1 rounded-xl border border-white/15 bg-white/5 px-4 py-3 outline-none placeholder:text-white/40 focus:border-purple-500" />
        <button class="rounded-xl bg-gradient-to-br from-purple-600 to-fuchsia-600 px-6 py-3 font-semibold shadow-glow">Subscribe</button>
      </form>
      <p id="newsMsg" class="mt-3 text-sm text-white/70"></p>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="relative py-20">
    <div class="mx-auto max-w-6xl px-6">
      <div class="grid gap-8 md:grid-cols-2">
        <div class="rounded-2xl border border-white/10 bg-white/5 p-6">
          <h3 class="text-2xl font-semibold">Get in touch</h3>
          <p class="mt-2 text-white/70">For bookings, media, or collabs—say hello. We usually respond within 48 hours.</p>
          <ul class="mt-6 space-y-3 text-white/80">
            <li class="flex items-center gap-3"><span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-purple-600/20">📧</span> hello@mymusic.example</li>
            <li class="flex items-center gap-3"><span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-purple-600/20">📍</span> Worldwide</li>
            <li class="flex items-center gap-3"><span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-purple-600/20">🔗</span> @mymusic on socials</li>
          </ul>
        </div>
        <form id="contactForm" class="rounded-2xl border border-white/10 bg-gradient-to-br from-white/5 to-white/[0.02] p-6 shadow-xl">
          <div class="grid gap-4 sm:grid-cols-2">
            <div>
              <label class="block text-xs text-white/60">First name</label>
              <input name="first" required class="mt-1 w-full rounded-xl border border-white/15 bg-white/5 px-4 py-3 outline-none focus:border-purple-500" />
            </div>
            <div>
              <label class="block text-xs text-white/60">Last name</label>
              <input name="last" required class="mt-1 w-full rounded-xl border border-white/15 bg-white/5 px-4 py-3 outline-none focus:border-purple-500" />
            </div>
            <div class="sm:col-span-2">
              <label class="block text-xs text-white/60">Email</label>
              <input type="email" name="email" required class="mt-1 w-full rounded-xl border border-white/15 bg-white/5 px-4 py-3 outline-none focus:border-purple-500" />
            </div>
            <div class="sm:col-span-2">
              <label class="block text-xs text-white/60">Message</label>
              <textarea name="message" rows="4" required class="mt-1 w-full rounded-xl border border-white/15 bg-white/5 px-4 py-3 outline-none focus:border-purple-500"></textarea>
            </div>
          </div>
          <button class="mt-4 w-full rounded-xl bg-gradient-to-br from-purple-600 to-fuchsia-600 px-6 py-3 font-semibold shadow-glow">Send</button>
          <p id="contactMsg" class="mt-3 text-sm text-white/70"></p>
        </form>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="border-t border-white/10 py-10 text-center text-sm text-white/60">
  <div class="mx-auto max-w-7xl px-6">
    <div class="flex flex-col items-center justify-between gap-6 md:flex-row">
      <p class="flex items-center gap-1">
        © <span id="year"></span> Pixify. Made with love by Anish 
        <span class="animate-pulse text-red-500">💓</span>
      </p>
      <div class="flex items-center gap-4">
        <a href="#" class="inline-flex rounded-lg border border-white/10 px-3 py-1 hover:bg-white/5">Twitter</a>
        <a href="#" class="inline-flex rounded-lg border border-white/10 px-3 py-1 hover:bg-white/5">Instagram</a>
        <a href="#" class="inline-flex rounded-lg border border-white/10 px-3 py-1 hover:bg-white/5">YouTube</a>
        <a href="#" class="inline-flex rounded-lg border border-white/10 px-3 py-1 hover:bg-white/5">Spotify</a>
      </div>
    </div>
  </div>
</footer>

  <!-- Back to top -->
  <button id="toTop" class="fixed bottom-5 right-5 z-50 hidden rounded-full bg-white/10 p-3 backdrop-blur hover:bg-white/20" aria-label="Back to top">
    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/></svg>
  </button>

  <!-- SCRIPTS -->
  <script>
    // UTIL
    const $ = (sel, ctx=document) => ctx.querySelector(sel);
    const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    // Navbar behavior
    const navbar = document.getElementById('navbar');
    const mobileBtn = document.getElementById('mobileBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const navLinks = $$('#navLinks a');

    const setNavBg = () => {
      const scrolled = window.scrollY > 8;
      navbar.className = `fixed top-0 inset-x-0 z-50 transition-all ${scrolled ? 'bg-[#0b0b10]/80 backdrop-blur border-b border-white/10' : ''}`;
    };
    setNavBg();
    window.addEventListener('scroll', setNavBg);

    mobileBtn.addEventListener('click', () => {
      const open = mobileMenu.classList.toggle('hidden');
      mobileBtn.setAttribute('aria-expanded', (!open).toString());
    });
    $$('#mobileMenu a').forEach(a => a.addEventListener('click', () => mobileMenu.classList.add('hidden')));

    // Scrollspy
    const sections = ['about','music','gallery','events','contact'];
    const sectionEls = sections.map(id => document.getElementById(id));
    const navMap = new Map(sections.map(id => [id, $(`.nav-link[href="#${id}"]`)]));
    const spy = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.id;
          navLinks.forEach(l => l.classList.remove('text-white'));
          const link = navMap.get(id);
          if (link) link.classList.add('text-white');
        }
      });
    }, { rootMargin: '-40% 0px -55% 0px', threshold: 0.01 });
    sectionEls.forEach(el => spy.observe(el));

    // Counters in hero
    const counterEls = $$('[data-counter]');
    const counterObs = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const el = entry.target;
          const target = parseFloat(el.dataset.counter);
          let cur = 0, start = null;
          const dur = 1200;
          const step = ts => {
            if (!start) start = ts;
            const p = Math.min((ts - start) / dur, 1);
            cur = target * p;
            el.textContent = target >= 10 ? Math.round(cur).toLocaleString() : (cur.toFixed(1));
            if (p < 1) requestAnimationFrame(step);
          }
          requestAnimationFrame(step);
          counterObs.unobserve(el);
        }
      });
    }, { threshold: 0.4 });
    counterEls.forEach(el => counterObs.observe(el));

    // MUSIC PLAYER
    const tracks = [
      { title: 'Dream Beats', artist: 'MyMusic', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3', cover: 'https://picsum.photos/400/400?random=31' },
      { title: 'Night Vibes', artist: 'MyMusic', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3', cover: 'https://picsum.photos/400/400?random=32' },
      { title: 'Solar Drift', artist: 'MyMusic', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3', cover: 'https://picsum.photos/400/400?random=33' },
      { title: 'Neon Skyline', artist: 'MyMusic', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3', cover: 'https://picsum.photos/400/400?random=34' },
    ];

    const audio = document.getElementById('audio');
    const cover = document.getElementById('cover');
    const titleEl = document.getElementById('trackTitle');
    const artistEl = document.getElementById('trackArtist');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const playIcon = document.getElementById('playIcon');
    const pauseIcon = document.getElementById('pauseIcon');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const progressWrap = document.getElementById('progressWrap');
    const progressBar = document.getElementById('progressBar');
    const currentTimeEl = document.getElementById('currentTime');
    const durationEl = document.getElementById('duration');
    const volume = document.getElementById('volume');
    const playlistUl = document.getElementById('playlist');

    let index = 0;
    let userSeeking = false;

    const fmt = s => {
      if (isNaN(s)) return '0:00';
      const m = Math.floor(s/60); const sec = Math.floor(s%60).toString().padStart(2,'0');
      return `${m}:${sec}`;
    };

    const loadTrack = (i) => {
      index = (i + tracks.length) % tracks.length;
      const tr = tracks[index];
      audio.src = tr.url;
      titleEl.textContent = tr.title;
      artistEl.textContent = tr.artist;
      cover.src = tr.cover;
      $$('#playlist li').forEach(li => li.classList.remove('bg-white/10'));
      const active = $(`#playlist li[data-idx="${index}"]`);
      if (active) active.classList.add('bg-white/10');
      audio.play().catch(()=>{});
      playIcon.classList.add('hidden');
      pauseIcon.classList.remove('hidden');
    };

    // Build playlist UI
    tracks.forEach((t, i) => {
      const li = document.createElement('li');
      li.className = 'flex items-center gap-4 p-4 hover:bg-white/5 cursor-pointer';
      li.setAttribute('data-idx', i);
      li.innerHTML = `
        <img src="${t.cover}" alt="${t.title}" class="h-14 w-14 rounded-lg object-cover"/>
        <div class="min-w-0 flex-1">
          <p class="truncate font-medium">${t.title}</p>
          <p class="truncate text-sm text-white/60">${t.artist}</p>
        </div>
        <button class="rounded-lg border border-white/10 px-2 py-1 text-xs">Play</button>
      `;
      li.addEventListener('click', () => loadTrack(i));
      playlistUl.appendChild(li);
    });

    loadTrack(0);

    playPauseBtn.addEventListener('click', () => {
      if (audio.paused) { audio.play(); playIcon.classList.add('hidden'); pauseIcon.classList.remove('hidden'); }
      else { audio.pause(); playIcon.classList.remove('hidden'); pauseIcon.classList.add('hidden'); }
    });
    prevBtn.addEventListener('click', () => loadTrack(index-1));
    nextBtn.addEventListener('click', () => loadTrack(index+1));

    audio.addEventListener('timeupdate', () => {
      if (userSeeking) return;
      const p = (audio.currentTime / (audio.duration || 1));
      progressBar.style.width = `${p*100}%`;
      currentTimeEl.textContent = fmt(audio.currentTime);
      durationEl.textContent = fmt(audio.duration);
    });
    audio.addEventListener('ended', () => loadTrack(index+1));
    volume.addEventListener('input', (e) => audio.volume = e.target.value);

    const seek = (clientX) => {
      const rect = progressWrap.getBoundingClientRect();
      const ratio = Math.min(Math.max(0, clientX - rect.left), rect.width) / rect.width;
      audio.currentTime = (audio.duration || 0) * ratio;
    };

    progressWrap.addEventListener('mousedown', (e) => { userSeeking = true; seek(e.clientX); });
    document.addEventListener('mousemove', (e) => { if (userSeeking) seek(e.clientX); });
    document.addEventListener('mouseup', () => { if (userSeeking) userSeeking = false; });

    // GALLERY
    const galleryGrid = document.getElementById('galleryGrid');
    const shuffleBtn = document.getElementById('shuffleBtn');
    let imgs = Array.from({length: 18}, (_,i) => ({
      src: `https://picsum.photos/seed/music${i+1}/600/800`,
      cap: `Shot ${i+1}`,
    }));

    const renderGallery = () => {
      galleryGrid.innerHTML = '';
      imgs.forEach((img, i) => {
        const fig = document.createElement('figure');
        fig.className = 'group relative overflow-hidden rounded-xl border border-white/10 bg-white/5';
        fig.innerHTML = `
          <img loading="lazy" src="${img.src}" alt="${img.cap}" class="aspect-[3/4] w-full object-cover transition duration-300 group-hover:scale-105"/>
          <figcaption class="pointer-events-none absolute inset-x-0 bottom-0 translate-y-2 opacity-0 transition-all group-hover:translate-y-0 group-hover:opacity-100">
            <div class="m-2 rounded-lg bg-black/50 px-2 py-1 text-xs">${img.cap}</div>
          </figcaption>`;
        fig.addEventListener('click', () => openLightbox(i));
        galleryGrid.appendChild(fig);
      });
    };

    const shuffle = (arr) => arr.map(v => [v, Math.random()]).sort((a,b) => a[1]-b[1]).map(([v])=>v);
    shuffleBtn.addEventListener('click', () => { imgs = shuffle(imgs); renderGallery(); });
    renderGallery();

    // Lightbox logic
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightboxImg');
    const lightboxCap = document.getElementById('lightboxCap');
    const closeLightbox = document.getElementById('closeLightbox');
    const prevImg = document.getElementById('prevImg');
    const nextImg = document.getElementById('nextImg');
    let lightIdx = 0;

    const openLightbox = (i) => {
      lightIdx = i;
      const item = imgs[lightIdx];
      lightboxImg.src = item.src.replace('/600/800', '/900/1200');
      lightboxCap.textContent = item.cap;
      lightbox.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    };
    const closeLb = () => { lightbox.classList.add('hidden'); document.body.style.overflow = ''; };
    const stepImg = (d) => { lightIdx = (lightIdx + d + imgs.length) % imgs.length; openLightbox(lightIdx); };

    closeLightbox.addEventListener('click', closeLb);
    prevImg.addEventListener('click', () => stepImg(-1));
    nextImg.addEventListener('click', () => stepImg(1));
    document.addEventListener('keydown', (e) => {
      if (lightbox.classList.contains('hidden')) return;
      if (e.key === 'Escape') closeLb();
      if (e.key === 'ArrowLeft') stepImg(-1);
      if (e.key === 'ArrowRight') stepImg(1);
    });
    lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLb(); });

    // EVENTS
    const eventList = document.getElementById('eventList');
    const filterBtns = $$('.filter-btn');
    const events = [
      { title: 'Live in New York', date: '2025-09-15', city: 'New York, USA', type: 'tour', img: 'https://picsum.photos/seed/nyc/600/400' },
      { title: 'Sunset Festival', date: '2025-10-22', city: 'Los Angeles, USA', type: 'festival', img: 'https://picsum.photos/seed/la/600/400' },
      { title: 'Acoustic Night', date: '2025-11-05', city: 'London, UK', type: 'tour', img: 'https://picsum.photos/seed/lon/600/400' },
      { title: 'Producer Workshop', date: '2025-09-28', city: 'Berlin, DE', type: 'workshop', img: 'https://picsum.photos/seed/ber/600/400' },
      { title: 'Beach Fest', date: '2025-12-12', city: 'Goa, IN', type: 'festival', img: 'https://picsum.photos/seed/goa/600/400' },
      { title: 'Indie Collab Jam', date: '2025-10-03', city: 'Tokyo, JP', type: 'workshop', img: 'https://picsum.photos/seed/tok/600/400' },
    ];

    const renderEvents = (filter='all') => {
      const fmtDate = (d) => new Date(d + 'T00:00:00').toLocaleDateString(undefined, { year:'numeric', month:'short', day:'numeric' });
      eventList.innerHTML = '';
      events.filter(ev => filter==='all' || ev.type===filter).forEach(ev => {
        const card = document.createElement('article');
        card.className = 'overflow-hidden rounded-2xl border border-white/10 bg-white/5 shadow-lg';
        card.innerHTML = `
          <img src="${ev.img}" alt="${ev.title}" class="h-40 w-full object-cover"/>
          <div class="p-5">
            <p class="text-xs text-white/60">${fmtDate(ev.date)} • ${ev.city}</p>
            <h3 class="mt-1 text-lg font-semibold">${ev.title}</h3>
            <div class="mt-3 flex items-center gap-3">
              <span class="rounded-full border border-white/10 px-2 py-1 text-xs capitalize">${ev.type}</span>
              <a href="#" class="ml-auto rounded-lg bg-gradient-to-br from-purple-600 to-fuchsia-600 px-3 py-1.5 text-sm shadow-glow">Get Tickets</a>
            </div>
          </div>`;
        eventList.appendChild(card);
      });
    };
    renderEvents();

    filterBtns.forEach(btn => btn.addEventListener('click', () => {
      filterBtns.forEach(b => b.classList.remove('bg-white/10'));
      btn.classList.add('bg-white/10');
      renderEvents(btn.dataset.filter);
    }));

    // Newsletter + Contact fake handlers
    const newsForm = document.getElementById('newsForm');
    const newsMsg = document.getElementById('newsMsg');
    newsForm.addEventListener('submit', (e) => {
      e.preventDefault();
      newsMsg.textContent = 'Thanks! Please check your inbox to confirm.';
    });

    const contactForm = document.getElementById('contactForm');
    const contactMsg = document.getElementById('contactMsg');
    contactForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const fd = new FormData(contactForm);
      const hasAll = ['first','last','email','message'].every(k => fd.get(k));
      contactMsg.textContent = hasAll ? 'Message sent ✅ (demo)' : 'Please fill all fields.';
    });

    // Back to top
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', () => {
      toTop.classList.toggle('hidden', window.scrollY < 600);
    });
    toTop.addEventListener('click', () => window.scrollTo({top:0, behavior:'smooth'}));

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
